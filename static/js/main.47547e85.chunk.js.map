{"version":3,"sources":["components/Header.tsx","data/declare.ts","components/hooks/useGridDataManager.ts","components/TaskList.tsx","components/TaskDependencies.tsx","components/hooks/useDescriptions.ts","components/Tasks.tsx","data/cooks/declare.ts","data/tasks/async-paramdigms.ts","data/tasks/bill-types.ts","data/tasks/customized-forms.ts","data/tasks/eca-rules.ts","data/tasks/forms.ts","data/tasks/micro-apps.ts","data/tasks/micro-bffs.ts","data/tasks/query-solutions.ts","data/tasks/refers.ts","data/tasks/web-unpacks.ts","data/tasks/trek-unpacks.ts","data/categories.ts","data/cooks/mister-force-relation.ts","data/cooks/mister-sankey.ts","data/cooks/index.ts","data/index.ts","components/hooks/useChartOptions.ts","components/GraphChart.tsx","components/SankeyChart.tsx","components/Charts.tsx","App.tsx","index.tsx"],"names":["Header","props","onTaskChanged","onDependenciesChanged","tasks","dependencies","clearHandler","exportHandler","data","blob","Blob","JSON","stringify","undefined","type","saveAs","importHandler","file","Promise","resolve","reader","FileReader","readAsText","onload","result","parse","toString","useImport","className","icon","DeleteTwoTone","shape","onClick","DownloadOutlined","beforeUpload","showUploadList","UploadOutlined","TaskCategoryEnum","TaskDependentTypeEnum","useGridDataManager","useState","gridApi","setGridApi","getRowData","rowData","forEachNode","node","push","onGridReady","params","api","onRowDataUpdated","onDataChanged","console","log","onCellValueChanged","create","applyTransaction","add","id","Date","now","ensureIndexVisible","length","remove","selectedData","getSelectedRows","TaskList","React","memo","FileAddTwoTone","getRowNodeId","rowSelection","suppressScrollOnNewData","field","headerName","width","editable","cellEditor","cellEditorParams","values","Object","flex","minWidth","TaskDependencies","taskSelectValues","map","task","relationValues","valueGetter","descriptions","join","valueSetter","newValue","split","MrCookEnum","Tasks","TechnicalSupport","Refactory","Goal","Dependent","Solution","Task","Related","Action","categories","name","symbolSize","itemStyle","symbol","putIntoData","packages","forEach","category","nodes","deps","src","target","getEdgeSymbol","links","source","key","description","cookForECharts","categoryMap","reduce","arr","makeCategoryMap","styles","getEmptyData","MrForceRelation","pack","value","MrSankey","cook","ForceRelation","Sankey","cookData","useChartOptions","sankey","tooltip","legend","orient","x","y","top","a","animation","animationDuration","animationEasingUpdate","series","emphasis","focus","label","position","show","normal","formatter","lineStyle","color","curveness","useSankeyOptions","forceRelation","layout","force","repulsion","gravity","layoutAnimation","edgeLength","roam","focusNodeAdjacency","useForceRelationOptions","GraphChart","options","option","SankeyChart","Charts","forceRenderTabPanel","useStatement","useTasks","actions","App","rootElement","document","getElementById","render"],"mappings":"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","file":"static/js/main.47547e85.chunk.js","sourcesContent":["import React from \"react\";\nimport {Button, Upload} from \"antd\";\nimport { DownloadOutlined, UploadOutlined, DeleteTwoTone } from '@ant-design/icons';\nimport {saveAs} from \"file-saver\";\n\nimport {ITask, ITaskDependencies} from \"../data/declare\";\n\n\nexport type HeaderProps = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>,\n  onTaskChanged: (tasks: Array<ITask>) => void,\n  onDependenciesChanged: (dependencies: Array<ITaskDependencies>) => void\n}\n\nexport const Header: React.FunctionComponent<HeaderProps> = props => {\n\n  const clearHandler = useClear(props.onTaskChanged, props.onDependenciesChanged);\n  const exportHandler = useExport(props.tasks, props.dependencies);\n  const importHandler = useImport(props.onTaskChanged, props.onDependenciesChanged);\n\n  return (\n    <>\n      <div className={\"header-container\"}>\n        <div className={\"header-left\"}>\n          <h3>企企四季度目标依赖关系</h3>\n        </div>\n        <div className={\"header-right\"}>\n          <Button icon={<DeleteTwoTone />} shape={'circle'} onClick={() => clearHandler()} />\n          <Button type=\"primary\" icon={<DownloadOutlined />} shape={'circle'} onClick={() => exportHandler()} />\n          { /** @ts-ignore */}\n          <Upload beforeUpload={importHandler} showUploadList={false}>\n            <Button type=\"primary\" icon={<UploadOutlined />} shape={'circle'} />\n          </Upload>\n        </div>\n      </div>\n\n\n    </>\n\n  );\n}\n\nfunction useClear(onTaskChanged: (tasks: Array<ITask>) => void, onDependenciesChanged: (dependencies: Array<ITaskDependencies>) => void) {\n  return () => {\n    onTaskChanged([]);\n    onDependenciesChanged([]);\n  }\n}\n\nfunction useExport(tasks: Array<ITask>, dependencies: Array<ITaskDependencies>) {\n  return () => {\n    const data = {tasks, dependencies};\n    const blob = new Blob([JSON.stringify(data, undefined, 2)], {type: \"text/json;charset=utf-8\"});\n    saveAs(blob, 'data.json');\n  }\n}\n\nfunction useImport(onTaskChanged: (tasks: Array<ITask>) => void, onDependenciesChanged: (dependencies: Array<ITaskDependencies>) => void) {\n  return (file: any) => {\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.readAsText(file);\n      reader.onload = () => {\n        if (reader.result) {\n          const data = JSON.parse(reader.result.toString());\n          onTaskChanged(data.tasks);\n          onDependenciesChanged(data.dependencies);\n        }\n      };\n\n      resolve(undefined)\n    });\n  }\n}","export enum TaskCategoryEnum {\n  Goal = '目标',\n  Solution = '方案',\n  TechnicalSupport = '技术支撑',\n  Refactory = '重构',\n  Action = '动作',\n  Task = \"任务项\"\n}\n\nexport enum TaskDependentTypeEnum {\n  Dependent = \"Dependent\",\n  Related = \"Related\"\n}\n\nexport type ITask = {\n  id: string,\n  name: string,\n  category: TaskCategoryEnum,\n  descriptions?: Array<string>\n}\n\nexport type ITaskDependencies = {\n  src: string,\n  target: string,\n  type: TaskDependentTypeEnum,\n  descriptions?: Array<string>\n}\n\nexport type ITaskPackages = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>\n}\n\nexport type IEchartsGraphData = {\n  nodes: Array<any>;\n  links: Array<any>;\n  categories: Array<any>;\n  description: Record<string, string>;\n};","import {useState} from \"react\";\nimport {GridApi, GridReadyEvent, RowDataUpdatedEvent} from \"ag-grid-community\";\nimport {ITask} from \"../../data/declare\";\n\n\nexport type GridDataManagerParams<T = any> = {\n  data: Array<T>;\n  onDataChanged: (data: Array<T>) => void;\n}\n\nexport interface IGridDataManager {\n  data: Array<any>,\n\n  onGridReady(params: GridReadyEvent): void,\n\n  onRowDataUpdated(params: RowDataUpdatedEvent): void,\n\n  onCellValueChanged(): void,\n\n  create(): void,\n\n  remove(): void,\n}\n\nexport function useGridDataManager(props: GridDataManagerParams): IGridDataManager {\n\n  const [gridApi, setGridApi] = useState<GridApi>();\n\n  const create = () => {\n    const rs = gridApi?.applyTransaction({\n      add: [{id: Date.now()}]\n    });\n\n    gridApi?.ensureIndexVisible(props.data.length);\n  }\n\n  const remove = () => {\n    const selectedData = gridApi?.getSelectedRows();\n    console.log('selectedData', selectedData);\n    if (selectedData?.length) {\n      const res = gridApi?.applyTransaction({remove: selectedData});\n    }\n  }\n\n\n  const getRowData = () => {\n    const rowData: Array<ITask> = [];\n    gridApi?.forEachNode(function (node) {\n      rowData.push(node.data);\n    });\n    return rowData;\n  }\n\n  const onGridReady = (params: GridReadyEvent) => {\n    setGridApi(params.api);\n  };\n\n  const onRowDataUpdated = (params: RowDataUpdatedEvent) => {\n    const rowData = getRowData();\n    props.onDataChanged(rowData);\n    console.log('row data changed', rowData);\n  };\n\n  const onCellValueChanged = () => {\n    const rowData = getRowData();\n    props.onDataChanged(rowData);\n  }\n\n\n  return {\n    data: props.data,\n    onGridReady,\n    onRowDataUpdated,\n    onCellValueChanged,\n    create,\n    remove\n  }\n}","import React, {useCallback, useMemo, useState} from \"react\";\nimport {AgGridReact, AgGridColumn} from \"ag-grid-react\";\nimport {Button} from 'antd';\nimport { FileAddTwoTone, DeleteTwoTone } from '@ant-design/icons';\n\nimport {ITask, TaskCategoryEnum} from \"../data/declare\";\nimport {useGridDataManager} from \"./hooks/useGridDataManager\";\n\n\nexport type TaskListProps = {\n  data: Array<ITask>;\n  onDataChanged: (data: Array<ITask>) => void;\n};\n\nexport const TaskList: React.FunctionComponent<TaskListProps> = React.memo((props) => {\n  const {data, onGridReady, onRowDataUpdated, onCellValueChanged, create, remove} = useGridDataManager(props);\n\n  return (\n    <div className=\"task-list\">\n      <div className={\"grid-header\"}>\n        <Button type=\"primary\" icon={<FileAddTwoTone />} shape={'circle'} onClick={() => create()} />\n        <Button type=\"default\" icon={<DeleteTwoTone />} shape={'round'} onClick={() => remove()}>选中</Button>\n      </div>\n      <AgGridReact\n        className={\"grid\"}\n        getRowNodeId={data => data.id}\n        // singleClickEdit={true}\n        rowData={data}\n        rowSelection={'single'}\n        suppressScrollOnNewData={true}\n        onGridReady={onGridReady}\n        onRowDataUpdated={onRowDataUpdated}\n        onCellValueChanged={onCellValueChanged}\n      >\n        <AgGridColumn\n          field=\"id\"\n          headerName=\"ID\"\n          width={100}\n          editable={true}\n          cellEditor=\"agTextCellEditor\"\n        />\n        <AgGridColumn\n          field=\"name\"\n          headerName=\"任务名称\"\n          width={200}\n          editable={true}\n          cellEditor=\"agTextCellEditor\"\n        />\n        <AgGridColumn\n          field=\"category\"\n          headerName=\"类型\"\n          width={100}\n          editable={true}\n          cellEditor=\"agPopupSelectCellEditor\"\n          cellEditorParams={{values: Object.values(TaskCategoryEnum)}}\n        />\n        <AgGridColumn\n          field=\"descriptions\"\n          headerName=\"描述\"\n          flex={1}\n          width={200}\n          minWidth={200}\n          editable={true}\n          cellEditor=\"agLargeTextCellEditor\"\n        />\n      </AgGridReact>\n    </div>\n  )\n});\n","import React from \"react\";\nimport {AgGridReact, AgGridColumn} from \"ag-grid-react\";\nimport {Button} from 'antd';\nimport { FileAddTwoTone, DeleteTwoTone } from '@ant-design/icons';\n\nimport {ITask, ITaskDependencies, TaskDependentTypeEnum} from \"../data/declare\";\nimport {useGridDataManager} from \"./hooks/useGridDataManager\";\nimport {useDescriptions} from \"./hooks/useDescriptions\";\n\nexport type TaskDependenciesProps = {\n  tasks: Array<ITask>,\n  data: Array<ITaskDependencies>;\n  onTaskChanged: (data: Array<ITask>) => void;\n  onDataChanged: (data: Array<ITaskDependencies>) => void;\n};\n\nexport const TaskDependencies: React.FunctionComponent<TaskDependenciesProps> = (props) => {\n  const {data, onGridReady, onRowDataUpdated, onCellValueChanged, create, remove} = useGridDataManager(props);\n  const taskSelectValues = useTaskSelectValues(props.tasks);\n  const relationValues = useRelationValues();\n  const { valueGetter, valueSetter } = useDescriptions();\n\n  return (\n    <div className=\"task-dependencies\">\n      <div className={\"grid-header\"}>\n        <Button type=\"primary\" icon={<FileAddTwoTone />} shape={'circle'} onClick={() => create()} />\n        <Button type=\"default\" icon={<DeleteTwoTone />} shape={'round'} onClick={() => remove()}>选中</Button>\n      </div>\n      <AgGridReact\n        className={\"grid\"}\n        getRowNodeId={data => data.id}\n        // singleClickEdit={true}\n        rowData={data}\n        rowSelection={'single'}\n        suppressScrollOnNewData={true}\n        onGridReady={onGridReady}\n        onRowDataUpdated={onRowDataUpdated}\n        onCellValueChanged={onCellValueChanged}\n      >\n        <AgGridColumn\n          field=\"src\"\n          headerName=\"源任务ID\"\n          width={200}\n          editable={true}\n          cellEditor=\"agPopupSelectCellEditor\"\n          cellEditorParams={{values: taskSelectValues}}\n        />\n        <AgGridColumn\n          field=\"target\"\n          headerName=\"目标任务ID\"\n          width={200}\n          editable={true}\n          cellEditor=\"agPopupSelectCellEditor\"\n          cellEditorParams={{values: taskSelectValues}}\n        />\n        <AgGridColumn\n          field=\"type\"\n          headerName=\"关系\"\n          width={150}\n          editable={true}\n          cellEditor=\"agPopupSelectCellEditor\"\n          cellEditorParams={{values: relationValues}}\n        />\n        <AgGridColumn\n          field=\"descriptions\"\n          headerName=\"描述\"\n          flex={1}\n          width={200}\n          minWidth={200}\n          editable={true}\n          cellEditor=\"agLargeTextCellEditor\"\n          valueGetter={valueGetter}\n          valueSetter={valueSetter}\n        />\n      </AgGridReact>\n    </div>\n  );\n};\n\n\nfunction useTaskSelectValues(tasks: Array<ITask>) {\n  return tasks.map(task => task.id);\n}\n\nfunction useRelationValues() {\n  return Object.values(TaskDependentTypeEnum);\n}","import {ValueGetterParams, ValueSetterParams} from \"ag-grid-community\";\n\nexport function useDescriptions() {\n  const valueGetter = (params: ValueGetterParams) => {\n    console.log('getter', params);\n    if(!params.data.descriptions) {\n      return undefined;\n    }\n\n    return params.data.descriptions.join('\\n');\n  }\n\n  const valueSetter = (params: ValueSetterParams) => {\n    console.log('setter', params);\n    console.log('newValue', params.newValue);\n    params.data.descriptions = params.newValue.split('\\n');\n    return true;\n  }\n\n  return {\n    valueGetter, valueSetter\n  }\n}","import React, {useState} from \"react\";\n\nimport {ITask, ITaskDependencies} from \"../data/declare\";\n\nimport {TaskList} from \"./TaskList\";\nimport {TaskDependencies} from \"./TaskDependencies\";\n\nexport type TasksProps = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>,\n  onTaskChanged: (tasks: Array<ITask>) => void,\n  onDependenciesChanged: (dependencies: Array<ITaskDependencies>) => void\n}\n\nexport const Tasks: React.FunctionComponent<TasksProps> = (props) => {\n  return (\n    <div className=\"tasks ag-theme-alpine\">\n      <TaskList data={props.tasks} onDataChanged={props.onTaskChanged}/>\n      <TaskDependencies tasks={props.tasks} data={props.dependencies} onTaskChanged={props.onTaskChanged} onDataChanged={props.onDependenciesChanged}/>\n    </div>\n  );\n};\n","export enum MrCookEnum {\n  ForceRelation = 'ForceRelation',\n  Sankey = 'Sankey'\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"AsyncParadigms\",\n    name: \"异步数据执行方案编排\",\n    category: TaskCategoryEnum.TechnicalSupport,\n    descriptions: [],\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  \n]\n\nexport const asyncParadigms: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"BillTypeRefactory\",\n    name: \"单据类型重构\",\n    category: TaskCategoryEnum.Refactory,\n    descriptions: [],\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  \n]\n\nexport const billTypes: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"CustomizedForm\",\n    name: \"自定义表单\",\n    category: TaskCategoryEnum.Goal,\n    descriptions: [],\n  }\n\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: \"CustomizedForm\", \n    target: \"FormEngineRefactory\", \n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: [\n      \"需要将 form-next 接入验证\"\n    ]\n  },\n  \n  {\n    src: \"CustomizedForm\", \n    target: \"ECARules\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: [\n      \"需要支持规则推荐\",\n    ]\n  },\n  {\n    src: \"CustomizedForm\", \n    target: \"BillTypeRefactory\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: [\n      \"主要是为了重新梳理跟后端数据间的转换关系\"\n    ]\n  },\n  {\n    src: \"CustomizedForm\", \n    target: \"ReferRefactory\",\n    type: TaskDependentTypeEnum.Dependent,\n  },\n  {\n    src: \"CustomizedForm\", \n    target: \"MicroAppsRouterManager\",\n    type: TaskDependentTypeEnum.Dependent,\n  }\n\n]\n\nexport const customizedForms: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"ECARules\",\n    name: \"ECARules\",\n    category: TaskCategoryEnum.Solution,\n    descriptions: [],\n  },\n  {\n    id: \"ECARulesAdminister\",\n    name: \"ECARules规则治理\",\n    category: TaskCategoryEnum.Task,\n    descriptions: [],\n  },\n  {\n    id: \"ECARulesAsync\",\n    name: \"ECARules支持异步\",\n    category: TaskCategoryEnum.Task,\n    descriptions: [],\n  },\n  {\n    id: \"ECARulesDesigner\",\n    name: \"ECARules设计器（用户端）\",\n    category: TaskCategoryEnum.Task,\n    descriptions: [],\n  },\n  \n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  { \n    src: \"ECARules\", \n    target: \"ECARulesAdminister\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n  { \n    src: \"ECARules\", \n    target: \"ECARulesAsync\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n  { \n    src: \"ECARulesAsync\", \n    target: \"AsyncParadigms\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n  { \n    src: \"ECARules\", \n    target: \"ECARulesDesigner\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n]\n\nexport const ecaRules: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"FormAtom\",\n    name: \"表单原子能力\",\n    category: TaskCategoryEnum.Solution,\n    descriptions: [],\n  },\n\n  {\n    id: \"FormBaseCodeExtract\",\n    name: \"表单跨端代码抽取\",\n    category: TaskCategoryEnum.Solution,\n    descriptions: [],\n  },\n  \n  {\n    id: \"FormEngineRefactory\",\n    name: \"表单引擎重构\",\n    category: TaskCategoryEnum.TechnicalSupport,\n    descriptions: [],\n  },\n\n  {\n    id: \"FormEngineDynamics\",\n    name: \"表单动态模型\",\n    category: TaskCategoryEnum.Task\n  },\n\n  {\n    id: \"FormEngineHooks\",\n    name: \"表单 hooks api\",\n    category: TaskCategoryEnum.Task\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: \"FormEngineRefactory\",\n    target: \"FormEngineHooks\",\n    type: TaskDependentTypeEnum.Dependent,\n  },\n  {\n    src: \"FormEngineRefactory\",\n    target: \"FormAtom\",\n    type: TaskDependentTypeEnum.Dependent,\n  },\n  {\n    src: \"FormEngineRefactory\",\n    target: \"FormEngineDynamics\",\n    type: TaskDependentTypeEnum.Dependent,\n  }\n]\n\nexport const forms: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"MicroApps\",\n    name: \"微前端\",\n    category: TaskCategoryEnum.Goal,\n    descriptions: []\n  },\n  {\n    id: \"MicroAppsAdminister\",\n    name: \"微前端项目治理\",\n    category: TaskCategoryEnum.Solution,\n    descriptions: []\n  },\n  {\n    id: \"MicroAppsBaseTechnical\",\n    name: \"基座能力\",\n    category: TaskCategoryEnum.Task,\n    descriptions: []\n  },\n  {\n    id: \"MicroAppsSingleton\",\n    name: \"抽取全局单例对象\",\n    category: TaskCategoryEnum.Task,\n    descriptions: [\n      \"1.\"\n    ]\n  },\n  {\n    id: \"MicroAppsRouterManager\",\n    name: \"路由管理\",\n    category: TaskCategoryEnum.Task,\n    descriptions: [\n    \n    ]\n  },\n  {\n    id: \"WebpackModuleDederationVerify\",\n    name: \"webpack module federation 技术验证\",\n    category: TaskCategoryEnum.TechnicalSupport\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: \"MicroApps\",\n    target: \"MicroAppsBaseTechnical\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: []\n  },\n  {\n    src: \"MicroApps\",\n    target: \"MicroAppsAdminister\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: []\n  },\n  {\n    src: \"MicroAppsBaseTechnical\",\n    target: \"WebUnpack\",\n    type: TaskDependentTypeEnum.Related,\n    descriptions: []\n  },\n  {\n    src: \"MicroApps\",\n    target: \"WebpackModuleDederationVerify\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: []\n  },\n  {\n    src: \"MicroApps\",\n    target: \"MicroAppsSingleton\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: []\n  },\n  {\n    src: \"MicroApps\",\n    target: \"MicroAppsSingleton\",\n    type: TaskDependentTypeEnum.Dependent,\n    descriptions: []\n  }\n]\n\nexport const microApps: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"MicroBFF\",\n    name: \"微BFF\",\n    category: TaskCategoryEnum.Goal,\n    descriptions: []\n  },\n  {\n    id: \"MicroBFFAdminister\",\n    name: \"BFF项目治理\",\n    category: TaskCategoryEnum.Solution,\n    descriptions: []\n  },\n  {\n    id: \"MicroBFFBaseTechnical\",\n    name: \"基础能力拆分\",\n    category: TaskCategoryEnum.Task,\n    descriptions: []\n  },\n  {\n    id: \"TrekServiceUnpack\",\n    name: \"现有Service抽取为子应用\",\n    category: TaskCategoryEnum.Task,\n    descriptions: []\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: \"MicroBFF\",\n    target: \"MicroBFFAdminister\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n  {\n    src: \"MicroBFF\",\n    target: \"MicroBFFBaseTechnical\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n  {\n    src: \"MicroBFF\",\n    target: \"TrekServiceUnpack\",\n    type: TaskDependentTypeEnum.Dependent\n  },\n]\n\nexport const microBFFs: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"QuerySolutionRefactory\",\n    name: \"查询方案重构\",\n    category: TaskCategoryEnum.Refactory,\n    descriptions: [],\n  },\n  {\n    id: \"DrillRefactory\",\n    name: \"穿透方案重构\",\n    category: TaskCategoryEnum.Refactory,\n    descriptions: [],\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  \n]\n\nexport const querySolutions: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"ReferRefactory\",\n    name: \"参照重构\",\n    category: TaskCategoryEnum.Refactory,\n    descriptions: [],\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  \n]\n\nexport const refers: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"WebUnpack\",\n    name: \"前端拆包\",\n    category: TaskCategoryEnum.Action,\n    descriptions: []\n  }\n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: \"WebUnpack\",\n    target: \"FormAtom\",\n    type: TaskDependentTypeEnum.Related\n  },\n  {\n    src: \"WebUnpack\",\n    target: \"ReferRefactory\",\n    type: TaskDependentTypeEnum.Related\n  },\n  {\n    src: \"WebUnpack\",\n    target: \"ECARulesAdminister\",\n    type: TaskDependentTypeEnum.Related\n  },\n  {\n    src: \"WebUnpack\",\n    target: \"QuerySolutionRefactory\",\n    type: TaskDependentTypeEnum.Related\n  },\n]\n\nexport const webUnpacks: ITaskPackages = {\n  tasks, dependencies\n}","import { ITask, TaskCategoryEnum, ITaskDependencies, ITaskPackages, TaskDependentTypeEnum } from '../declare';\n\nconst tasks: Array<ITask> = [\n  {\n    id: \"TrekUnpack\",\n    name: \"Trek拆包\",\n    category: TaskCategoryEnum.Action,\n    descriptions: []\n  },\n  \n]\n\nconst dependencies: Array<ITaskDependencies> = [\n  {\n    src: 'TrekUnpack',\n    target: 'MicroBFFAdminister',\n    type: TaskDependentTypeEnum.Related\n  },\n  {\n    src: 'TrekUnpack',\n    target: 'MicroBFFBaseTechnical',\n    type: TaskDependentTypeEnum.Related\n  },\n  {\n    src: 'TrekUnpack',\n    target: 'TrekServiceUnpack',\n    type: TaskDependentTypeEnum.Related\n  }\n]\n\nexport const trekUnpacks: ITaskPackages = {\n  tasks, dependencies\n}","export const categories = [\n  {\n    name: \"目标\",\n    symbolSize: 50,\n    itemStyle: {}\n  },\n  {\n    name: \"方案\",\n    symbolSize: 40\n  },\n  {\n    name: \"技术支撑\",\n    symbolSize: 30\n  },\n  {\n    name: \"重构\",\n    symbolSize: 40\n  },\n  {\n    name: \"动作\",\n    symbolSize: 20,\n    symbol: 'diamond',\n    // symbolRotate: 90,\n    itemStyle: {}\n  },\n  {\n    name: \"任务项\",\n    symbolSize: 20\n  }\n];","import { ITaskPackages, IEchartsGraphData, TaskDependentTypeEnum } from \"../declare\";\nimport { categories } from '../categories';\n\nfunction getEdgeSymbol(type: TaskDependentTypeEnum) {\n  if (type === TaskDependentTypeEnum.Related) {\n    return [\"none\", \"none\"];\n  }\n\n  return [\"arrow\", \"none\"]\n}\n\nfunction putIntoData(\n  data: IEchartsGraphData,\n  packages: ITaskPackages\n) {\n\n  const { tasks, dependencies } = packages;\n\n  tasks.forEach((task) => {\n    const { id, name, category } = task;\n\n    data.nodes.push({\n      id: id,\n      name: name,\n      category: category\n    });\n\n  });\n\n\n  dependencies.forEach((deps) => {\n    const { src, target, type, descriptions = [] } = deps;\n\n    const symbol = getEdgeSymbol(type);\n\n    data.links.push({\n      source: src,\n      target: target,\n      symbol: symbol\n    });\n\n    const key = `${src}-${target}`;\n    data.description[key] = descriptions.join('<br />');      \n\n  });\n\n  return data;\n}\n\nfunction makeCategoryMap(categories: Array<any>) {\n  return categories.reduce(\n    (arr, category) => ({ ...arr, [category.name]: category }),\n    {}\n  );\n}\n\nfunction cookForECharts(data: IEchartsGraphData): IEchartsGraphData {\n  const { nodes, links, categories, description } = data;\n\n  const categoryMap = makeCategoryMap(categories);\n\n  const styledNodes = nodes.map((node) => {\n    if (node.category && categoryMap[node.category]) {\n      const { name, ...styles } = categoryMap[node.category];\n      return {\n        ...node,\n        ...styles\n      };\n    }\n\n    return node;\n  });\n\n  return {\n    nodes: styledNodes,\n    links: links,\n    categories: categories,\n    description\n  };\n}\n\nfunction getEmptyData(): IEchartsGraphData {\n  return {\n    nodes: [],\n    links: [],\n    categories: categories,\n    description: {}\n  };\n}\n\nexport function MrForceRelation(...packages: Array<ITaskPackages>): IEchartsGraphData {\n  const data = packages.reduce((data, pack) => {\n    return putIntoData(data, pack)\n  }, getEmptyData());\n\n  return cookForECharts(data);\n}\n\n","import { ITaskPackages, IEchartsGraphData } from \"../declare\";\nimport { categories } from '../categories';\n\nfunction putIntoData(\n  data: IEchartsGraphData,\n  packages: ITaskPackages\n) {\n\n  const { tasks, dependencies } = packages;\n\n  tasks.forEach((task) => {\n    const { id, name, category } = task;\n\n    data.nodes.push({\n      id: id,\n      name: name,\n      category: category\n    });\n\n  });\n\n\n  dependencies.forEach((deps) => {\n    const { src, target, descriptions = [] } = deps;\n\n\n    // 桑基图是反过来的\n    data.links.push({\n      source: target,\n      target: src,\n      value: 1\n    });\n\n    const key = `${target}-${src}`;\n    data.description[key] = descriptions.join('<br />');      \n\n  });\n\n  return data;\n}\n\nfunction makeCategoryMap(categories: Array<any>) {\n  return categories.reduce(\n    (arr, category) => ({ ...arr, [category.name]: category }),\n    {}\n  );\n}\n\nfunction cookForECharts(data: IEchartsGraphData): IEchartsGraphData {\n  const { nodes, links, categories, description } = data;\n\n  const categoryMap = makeCategoryMap(categories);\n\n  const styledNodes = nodes.map((node) => {\n    if (node.category && categoryMap[node.category]) {\n      const { name, ...styles } = categoryMap[node.category];\n      return {\n        ...node,\n        ...styles\n      };\n    }\n\n    return node;\n  });\n\n  return {\n    nodes: styledNodes,\n    links: links,\n    categories: categories,\n    description\n  };\n}\n\nfunction getEmptyData(): IEchartsGraphData {\n  return {\n    nodes: [],\n    links: [],\n    categories: categories,\n    description: {}\n  };\n}\n\nexport function MrSankey(...packages: Array<ITaskPackages>): IEchartsGraphData {\n  const data = packages.reduce((data, pack) => {\n    return putIntoData(data, pack)\n  }, getEmptyData());\n\n  return cookForECharts(data);\n}\n\n","import { ITaskPackages } from '../declare';\n\nimport { MrCookEnum } from './declare';\nimport { MrForceRelation } from './mister-force-relation';\nimport { MrSankey } from './mister-sankey';\n\n\n\nexport function cook(type: MrCookEnum, ...packages: Array<ITaskPackages>) {\n  switch(type) {\n    case MrCookEnum.ForceRelation:\n      return MrForceRelation(...packages);\n\n    case MrCookEnum.Sankey:\n      return MrSankey(...packages);\n  }\n}","import { MrCookEnum } from './cooks/declare';\n\nimport { asyncParadigms } from './tasks/async-paramdigms';\nimport { billTypes } from \"./tasks/bill-types\";\nimport { customizedForms } from \"./tasks/customized-forms\";\nimport { ecaRules } from \"./tasks/eca-rules\";\nimport { forms } from \"./tasks/forms\";\nimport { microApps } from \"./tasks/micro-apps\";\nimport { microBFFs } from \"./tasks/micro-bffs\";\nimport { querySolutions } from \"./tasks/query-solutions\";\nimport { refers } from \"./tasks/refers\";\nimport { stocks } from \"./tasks/stocks\";\nimport { webUnpacks } from \"./tasks/web-unpacks\";\nimport { trekUnpacks } from \"./tasks/trek-unpacks\";\nimport { documentations } from \"./tasks/documentations\";\n\nimport { cook } from \"./cooks\";\nimport { ITaskPackages } from './declare';\n\nexport function loadData() {\n\n  return [\n    asyncParadigms,\n    billTypes,\n    customizedForms,\n    ecaRules,\n    forms,\n    microApps,\n    microBFFs,\n    querySolutions,\n    refers,\n    // stocks,\n    webUnpacks,\n    trekUnpacks,\n    documentations\n  ].reduce((packages, tasks) => {\n    packages.tasks = [...packages.tasks, ...tasks.tasks];\n    packages.dependencies = [...packages.dependencies, ...tasks.dependencies];\n    return packages;\n  }, { tasks: [], dependencies: []})\n\n  // return cook(\n  //   type,\n  //\n  //   asyncParadigms,\n  //   billTypes,\n  //   customizedForms,\n  //   ecaRules,\n  //   forms,\n  //   microApps,\n  //   microBFFs,\n  //   querySolutions,\n  //   refers,\n  //   // stocks,\n  //   webUnpacks,\n  //   trekUnpacks,\n  //   documentations\n  // );\n}\n\nexport function cookData(type: MrCookEnum, ...packages: Array<ITaskPackages>) {\n  return cook(type, ...packages)\n}","import {cookData} from \"../../data\";\nimport {MrCookEnum} from \"../../data/cooks/declare\";\nimport {ITaskPackages} from \"../../data/declare\";\n\n\nexport function useForceRelationOptions(packages: ITaskPackages) {\n  const forceRelation = cookData(MrCookEnum.ForceRelation, packages);\n\n  console.log('forceRelation', forceRelation);\n\n  return {\n\n    tooltip: {},\n    legend: [\n      {\n\n        orient: \"vertical\",\n        x: \"right\",\n        y: \"middle\",\n        top: \"0%\",\n        data: forceRelation.categories.map(function (a) {\n          return a.name;\n        })\n      }\n    ],\n    animation: false,\n    animationDuration: 1500,\n    animationEasingUpdate: \"quinticInOut\",\n\n    series: [\n      {\n        type: \"graph\",\n        layout: \"force\",\n        data: forceRelation.nodes,\n        links: forceRelation.links,\n        categories: forceRelation.categories,\n        // symbolSize: 50,\n        force: {\n          repulsion: 500,\n          gravity: 0.1,\n          layoutAnimation: false,\n          edgeLength: 100\n          // \"initLayout\": \"circular\"\n        },\n        animationDuration: 1500,\n        animationEasingUpdate: \"quinticInOut\",\n        roam: true,\n        symbolSize: 20,\n        focusNodeAdjacency: true,\n        // itemStyle: {\n        //   borderColor: \"#fff\",\n        //   borderWidth: 1,\n        //   // shadowBlur:4,\n        //   // shadowColor:'rgba(0, 0, 0, 0.2)',\n        //   color: \"#1c7231\",\n        //   backgroundColor: \"#edf6e8\"\n        // },\n\n        label: {\n          position: \"top\",\n          show: true\n          // formatter: '{b}'\n        },\n        lineStyle: {\n          color: \"#888\",\n          curveness: 0.3\n        },\n        emphasis: {\n          lineStyle: {\n            width: 10\n          }\n        },\n        tooltip: {\n          formatter: function (params: any) {\n            //连接线上提示文字格式化\n            const key = `${params.data.source}-${params.data.target}`;\n\n            return forceRelation.description[key];\n          }\n        }\n      }\n    ]\n  };\n}\n\nexport function useSankeyOptions(packages: ITaskPackages) {\n\n  const sankey = cookData(MrCookEnum.Sankey, packages);\n\n  return {\n    // title: {\n    //   text: \"企企四季度目标依赖关系\",\n    //   subtext: \"\",\n    //   top: \"top\",\n    //   left: \"left\"\n    // },\n    tooltip: {},\n    legend: [\n      {\n        // selectedMode: 'single',\n        orient: \"vertical\",\n        x: \"right\",\n        y: \"middle\",\n        top: \"0%\",\n        data: sankey.categories.map(function (a) {\n          return a.name;\n        })\n      }\n    ],\n    animation: false,\n    animationDuration: 1500,\n    animationEasingUpdate: \"quinticInOut\",\n\n    series: [\n      {\n        // xAxisIndex: 1,\n        // yAxisIndex: 0,\n        type: \"sankey\",\n        data: sankey.nodes,\n        links: sankey.links,\n        emphasis: {\n          focus: \"adjacency\"\n        },\n        label: {\n          position: \"top\",\n          show: true,\n          normal: {\n            formatter: (params: any) => {\n              return params.name;\n            }\n          }\n          // formatter: '{b}'\n        },\n        tooltip: {\n          formatter: function (params: any) {\n            //连接线上提示文字格式化\n            const key = `${params.data.source}-${params.data.target}`;\n\n            return sankey.description[key];\n          }\n        },\n        lineStyle: {\n          color: 'source',\n          curveness: 0.3\n        }\n      }\n    ]\n  };\n}\n\nexport function useChartOptions(type: MrCookEnum, packages: ITaskPackages) {\n  if(type === MrCookEnum.Sankey) {\n    return useSankeyOptions(packages);\n  }\n  return useForceRelationOptions(packages);\n}","import React from \"react\";\nimport ReactEcharts from \"echarts-for-react\";\n\nimport {MrCookEnum} from \"../data/cooks/declare\";\nimport {ITask, ITaskDependencies} from \"../data/declare\";\nimport {useChartOptions} from \"./hooks/useChartOptions\";\n\nexport type GraphChartProps = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>\n}\n\nexport const GraphChart: React.FunctionComponent<GraphChartProps> = (props) => {\n    const options = useChartOptions(MrCookEnum.ForceRelation, props);\n    return (\n      <ReactEcharts option={options} className={'chart-item'}/>\n    )\n  }\n;\n","import React from \"react\";\nimport ReactEcharts from \"echarts-for-react\";\n\nimport {MrCookEnum} from \"../data/cooks/declare\";\nimport {ITask, ITaskDependencies} from \"../data/declare\";\nimport {useChartOptions} from \"./hooks/useChartOptions\";\n\nexport type SankeyChartProps = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>\n}\n\nexport const SankeyChart: React.FunctionComponent<SankeyChartProps> = (props) => {\n  const options = useChartOptions(MrCookEnum.Sankey, props);\n  return (\n    <ReactEcharts option={options} className={'chart-item'}/>\n  );\n}\n\n","import React from \"react\";\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\nimport {GraphChart} from \"./GraphChart\";\nimport {SankeyChart} from \"./SankeyChart\";\nimport {ITask, ITaskDependencies} from \"../data/declare\";\n\nexport type ChartsProps = {\n  tasks: Array<ITask>,\n  dependencies: Array<ITaskDependencies>\n}\n\nexport const Charts: React.FunctionComponent<ChartsProps> = props => {\n  return (\n    <Tabs forceRenderTabPanel={true}>\n      <TabList>\n        <Tab>关系图</Tab>\n        <Tab>执行顺序图</Tab>\n      </TabList>\n      <TabPanel>\n        <GraphChart tasks={props.tasks} dependencies={props.dependencies}/>\n      </TabPanel>\n      <TabPanel>\n        <SankeyChart tasks={props.tasks} dependencies={props.dependencies}/>\n      </TabPanel>\n    </Tabs>\n  )\n}","import React, {useEffect, useState} from \"react\";\n\nimport {ITask, ITaskDependencies} from \"./data/declare\";\n\nimport {Header} from \"./components/Header\";\nimport {Tasks} from \"./components/Tasks\";\nimport {Charts} from \"./components/Charts\";\n\ninterface IStatement {\n  tasks: Array<ITask>;\n  dependencies: Array<ITaskDependencies>;\n  actions: {\n    onTaskChanged(tasks: Array<ITask>): void;\n    onDependenciesChanged(dependencies: Array<ITaskDependencies>): void;\n  };\n}\n\nfunction useTasks() {\n  const [tasks, onTaskChanged] = useState<Array<ITask>>([]);\n  const [dependencies, onDependenciesChanged] = useState<Array<ITaskDependencies>>([]);\n\n  // useEffect(() => {\n  //   const data = loadData();\n  //   console.log('load data', data);\n  //   onTaskChanged(data.tasks);\n  //   onDependenciesChanged(data.dependencies);\n  //\n  // }, [])\n\n  return {\n    tasks, onTaskChanged,\n    dependencies, onDependenciesChanged\n  }\n}\n\nfunction useStatement(): IStatement {\n  const {tasks, onTaskChanged, dependencies, onDependenciesChanged} = useTasks();\n\n  return {\n    tasks,\n    dependencies,\n    actions: {\n      onTaskChanged,\n      onDependenciesChanged\n    }\n  };\n}\n\nexport const App = () => {\n  const {tasks, dependencies, actions} = useStatement();\n  const {onTaskChanged, onDependenciesChanged} = actions;\n  console.log('app render', tasks);\n\n  return (\n    <>\n      <div className={\"app-container\"}>\n        <div className={\"header\"}>\n          <Header tasks={tasks} dependencies={dependencies} onTaskChanged={onTaskChanged} onDependenciesChanged={onDependenciesChanged} />\n        </div>\n        <div className={\"app-content-container\"}>\n          <div className={\"graph-container\"}>\n            <Charts tasks={tasks} dependencies={dependencies} />\n          </div>\n          <div className={\"list-container\"}>\n            <Tasks\n              tasks={tasks}\n              dependencies={dependencies}\n              onTaskChanged={onTaskChanged}\n              onDependenciesChanged={onDependenciesChanged}/>\n          </div>\n        </div>\n      </div>\n\n    </>\n  );\n};\n","import { render } from \"react-dom\";\n\nimport { App } from \"./App\";\n\nimport \"react-tabs/style/react-tabs.css\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\nimport \"antd/dist/antd.css\";\n\nimport \"./styles.css\";\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n"],"sourceRoot":""}